# Chapter 5 객체 지향 설계 5원칙

1. [SRP: 단일 책임 원칙](#1-srp---단일-책임-원칙)
2. [OCP: 개방 폐쇄 원칙](#2-ocp---개방-폐쇄-원칙)
3. [LSP: 리스코프 치환 원칙](#3-lsp---리스코프-치환-원칙)
4. [ISP: 인터페이스 분리 원칙](#4-isp---인터페이스-분리-원칙)
5. [DIP: 의존 역전 원칙](#5-dip---의존-역전-원칙)

SOLID 원칙의 배경: 응집도는 높이고(High Cohesion), 결합도는 낮추자(Loose Coupling)

## 1. SRP - 단일 책임 원칙

> "어떤 클래스를 변경해야 하는 이유는 오직 하나뿐이어야 한다."

* 한 클래스의 수정이 다른 부분의 수정으로 이어지면 안된다.
* 한 클래스가 너무 많은 책임을 지고 있으면, 여러 클래스로 분할해야 함.

### 잘못된 경우
#### 1. 메소드
```java
class dog{
   final static Boolean male = true;
   final static Boolean female = false;
   Boolean sex;
   
   void pee(){
      if(this.sex == male){
         // lift one leg
      }
      else {
         // sit
      }
   }
}
```
* 메소드가 단일 책임 원칙을 지키지 않을 경우, 다중 if문이 나타나게 됨.

#### 2. 변수

* 하나의 속성이 여러 의미를 갖는 경우
    * ex) db table 하나의 필드가 다른 필드가 무엇이냐에 따라 의미가 바뀌는 경우. 토지일 때는 면적, 건물일 때는 층수를 나타내는 경우
* 어떤 객체는 전혀 쓰지 않는 속성이 클래스에 정의되어 있을 경우
    * ex) 사람이라는 클래스로 여자와 남자를 만들었는데 군번이라는 변수를 남자라는 객체만 사용할 경우

## 2. OCP - 개방 폐쇄 원칙

> "소프트웨어 엔티티는 확장에 대해서는 열려 있어야 하지만, 변경에 대해서는 닫혀 있어야 한다."
> "자신의 확장에는 열려 있고, 주변의 변화에 대해서는 닫혀 있어야 한다."

* 엔티티 종류가 늘어남을 가정했을 때, 그 엔티티를 사용하는 호출부의 수정이 최소화되어야 한다.
* 비유 : 개발자가 작성한 소스코드는 운영체제의 변화에 닫혀 있고, 각 운영체제별 JVM은 확장에 열려 있는 구조가 되는 것이다.

## LSP - 리스코프 치환 원칙

> 서브 타입은 언제나 자신의 기반 타입으로 교체할 수 있어야 한다.
> 하위 클래스의 인스턴스는 상위형 객체 참조 변수에 대입해 상위 클래스의 인스턴스 역할을 하는 데 문제가 없어야 한다.

* 하위 클래스 is a kind of 상위 클래스 - 하위 분류는 상위 분류의 한 종류다.
* 구현 클래스 is able to 인터페이스 - 구현 분류는 인터페이스할 수 있어야 한다.
* 상위에서 정해둔 규칙은 하위에서도 지켜야 함.

#### 하위 클래스의 추가 원칙
1. 하위형에서 선행 조건은 강화될 수 없다.
선행 조건 : 함수의 로직을 실행하기 전에 validation 등을 하는 것

    * 상위 클래스의 정의된 메소드를 하위 클래스에서 오버라이딩 했을 때, validation 강도를 더 강화시키면 안됨.
    - ex) if(data < 0) throw -> if(data <=0) throw

2. 하위형에서 후행 조건은 약화될 수 없다.
후행 조건 : 함수의 로직을 실행 후, 데이터가 유효한지 여부를 검사하는 것(리턴 값 등 검사)

    * 상위 클래스에서 설정해둔 후행 조건을 하위 클래스에서 마음대로 완화시키면 안됨.

3. 하위형에서 상위형의 불변 조건은 반드시 유지되어야 한다.
    * 상위 클래스에 있는 불변 데이터를 하위 클래스에서 마음대로 바꿔버리면 안됨.

#### 물려줄 특성이 많을 수록이 좋다

   * 빈약한 상위 클래스를 이용할 경우, 자식 클래스에 정의된 메소드를 사용하기 위해 형변환과 instanceOf를 많이 사용해야 함. (다형성 사용X)

## ISP - 인터페이스 분리 원칙

> 클라이언트는 자신이 사용하지 않는 메서드에 의존 관계를 맺으면 안된다.

**인터페이스 최소주의 원칙** : 인터페이스를 통해 메서드를 외부에 제공할 때는 최소한의 메서드만 제공하자.
- 인터페이스는 그 역할에 충실한 최소한의 기능만 공개하자 : 강제하는 기능을 최소화하자.

## DIP - 의존 역전 원칙
> 자주 변경되는 구체 클래스에 의존하지 마라. 추상체에 의존할 것.

```Java
public class service{
  private Repository repository; // private JdbcRepository repository; (x)
}

public class JdbcRepository implements Repository{
}
```
비즈니스 로직이 추상체를 사용하게 하면, 구현체가 더 늘어나도 다형성을 사용함으로써 영향을 받지 않음.








